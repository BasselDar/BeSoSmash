<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeSoSmash üí•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
        /* A little custom CSS for the arcade glow */
        .neon-glow {
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
        }

        .box-glow {
            box-shadow: 0 0 15px currentColor;
        }
    </style>
</head>

<body
    class="bg-slate-950 text-white font-mono flex flex-col items-center min-h-screen p-5 transition-colors duration-100">

    <header class="text-center mt-8 mb-6 z-10">
        <h1
            class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-500 via-purple-500 to-yellow-500 neon-glow animate-pulse">
            BeSoSmash
        </h1>
        <p class="text-slate-400 mt-2 tracking-widest text-sm">GLOBAL KEYBOARD DESTRUCTION EVENT</p>
    </header>
    <%- include('partials/nav') %>
        <div id="game-container" class="w-full max-w-3xl text-center mb-8 z-10">

            <div id="setup-panel" class="mb-5 bg-slate-900/80 p-8 rounded-2xl border border-slate-700 backdrop-blur-sm">
                <h2 class="text-2xl font-bold text-yellow-400 mb-6">ENTER THE ARENA</h2>
                <div class="flex justify-center items-center gap-4">
                    <input type="text" id="username" placeholder="CODENAME" maxlength="12"
                        class="bg-slate-800 border-2 border-slate-600 text-white text-2xl p-4 rounded-xl text-center w-64 focus:outline-none focus:border-rose-500 uppercase transition-all uppercase font-bold">
                    <button onclick="startGame('blitz')"
                        class="bg-rose-600 hover:bg-rose-500 text-white font-black py-4 px-8 rounded-xl text-2xl box-glow text-rose-500 hover:scale-105 transition-transform active:scale-95">
                        RAGE
                    </button>
                </div>
            </div>

            <div id="smash-zone"
                class="hidden relative bg-slate-900 border-4 border-dashed border-rose-500 rounded-3xl p-8 flex flex-col items-center justify-center select-none box-glow text-rose-500 h-80">

                <div class="absolute top-4 left-6 text-left">
                    <p class="text-slate-400 text-sm font-bold">KPS (Keys/Sec)</p>
                    <p id="kps-display" class="text-3xl font-black text-yellow-400">0.0</p>
                </div>

                <div class="absolute top-4 right-6 text-right">
                    <p class="text-slate-400 text-sm font-bold">CURRENT RANK</p>
                    <p id="rank-display" class="text-2xl font-black text-slate-300 neon-glow">NOVICE</p>
                </div>

                <h2 id="status-text" class="text-3xl font-bold text-rose-500 animate-bounce mt-8">SMASH YOUR KEYBOARD!
                </h2>
                <div id="score-display"
                    class="text-[9rem] font-black text-white leading-none tracking-tighter neon-glow mt-4">0</div>
            </div>
        </div>

        <div class="w-full max-w-lg bg-slate-900/80 border border-slate-700 p-6 rounded-2xl backdrop-blur-sm z-10">
            <h3 class="text-2xl font-black text-yellow-400 mb-4 border-b border-slate-700 pb-3 flex justify-between">
                <span>üèÜ HALL OF CHAOS</span>
                <span class="text-sm font-normal text-slate-400 self-end">Live Cache</span>
            </h3>
            <ul id="leaderboard-list" class="space-y-3">
                <% leaders.forEach((player, index)=> { %>
                    <li
                        class="flex justify-between items-center p-3 rounded-lg bg-slate-800/50 hover:bg-slate-700 transition-colors border border-slate-700/50">
                        <span class="font-bold text-lg flex items-center gap-3">
                            <% if(index===0) { %><span class="text-2xl">ü•á</span> <span class="text-yellow-400">
                                    <%= player.name %>
                                </span>
                                <% } else if(index===1) { %><span class="text-2xl">ü•à</span> <span
                                        class="text-slate-300">
                                        <%= player.name %>
                                    </span>
                                    <% } else if(index===2) { %><span class="text-2xl">ü•â</span> <span
                                            class="text-amber-600">
                                            <%= player.name %>
                                        </span>
                                        <% } else { %><span class="text-slate-500 w-8 text-center">#<%= index + 1 %>
                                                    </span> <span class="text-slate-400">
                                                <%= player.name %>
                                            </span>
                                            <% } %>
                        </span>
                        <span class="font-black text-xl text-rose-400">
                            <%= player.score %>
                        </span>
                    </li>
                    <% }); %>
            </ul>
        </div>
        <script src="/js/game.js"></script>
</body>

</html>